const char sIndexPage[] PROGMEM = R"=====(
<!DOCTYPE HTML>
<html>
<head>
  <title>Eth Switch</title>
</head>
<body>
    <h1>Eth Switch</h1>
    
    <p style="text-align:center;">
    

  <table style="border: 1px solid #000000;">
    <tr>
      <td align=center height="50" width="20"><input id="BTN1" type="checkbox" disabled></td>
      <td id="LED1" width="5"> </td>
      <td width="80"></td>
      <td id="LED4" width="5"> </td>
      <td align=center width="20"><input id="BTN4" type="checkbox" disabled></td>
    </tr>
    <tr>
      <td align=center height="50"><input id="BTN2" type="checkbox" disabled></td>
      <td id="LED2"> </td>
      <td></td>
      <td id="LED5"> </td>
      <td align=center><input id="BTN5" type="checkbox" disabled></td>
    </tr>
    <tr>
      <td align=center height="50"><input id="BTN3" type="checkbox" disabled></td>
      <td id="LED3"> </td>
      <td></td>
      <td id="LED6"> </td>
      <td align=center><input id="BTN6" type="checkbox" disabled></td>
    </tr>
  </table>

  <br><br>

  <button onclick="window.location.href='./update';">OTA Update</button>
  <button onclick="window.location.href='./config';">Config</button>
  <button onclick="DoIt()">DoIt</button>

<script>
if (!!window.EventSource) {
  var source = new EventSource('/events');

  source.addEventListener('Buttons', function(e) {
     UpdateButtons(e.data);
  }, false);
  
  source.addEventListener('Leds', function(e) {
     UpdateLeds(e.data);
  }, false);

}

function DoIt()
{

}

function UpdateButtons(BtnJson)
{
  let obj = JSON.parse(BtnJson);
  console.log(obj.length);

  for (var i = 0; i < obj.length; i++)
  {
    BtnId = "BTN" +  (i+1);
    var state = obj[i];

    if( parseInt(state.state) != 0 )
      document.getElementById(BtnId).checked = true;
    else
      document.getElementById(BtnId).checked = false;
  } 
}

function UpdateLeds(LedJson)
{
  let obj = JSON.parse(LedJson);
  console.log(LedJson);
  for (var i = 0; i < obj.length; i++)
  {
    LedId = "LED" + (i+1);
    console.log(LedId);
    var color = obj[i];
    color = parseInt(color.RGB);

    color_hex = "#" + color.toString(16).padStart(6, '0');
    console.log(color_hex);

    if( color == 0 )
      document.getElementById(LedId).style.backgroundColor = 'transparent';
    else
      document.getElementById(LedId).style.backgroundColor = color_hex;
  } 
}
</script>
</body>
</html>
)=====";